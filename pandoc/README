# マークダウンからPDFへの一括変換

本ディレクトリの環境は、マークダウンファイルを直接PDFに変換するためにある。
なお、本環境に用いられる[pandoc](https://pandoc.org)の実行環境作りは、以下の成果を参考にした。

* [楽にDockerで日本語Pandocする](https://qiita.com/kojix2/items/1d2db46858ce202628d2)
* [自分が普段使ってるpandocの設定ファイルをさらす](https://zenn.dev/t4aru/articles/d6e23e4407c605)
* [Pandocのテンプレート機能でYAMLから本の奥付を自動生成する](https://qiita.com/sky_y/items/47da01623f50380c2023)

## 準備

1. [docker](https://www.docker.com)の実行環境が準備されていること。
1. 下記手順で実行用dockerイメージを作成しておくこと。
    1. `docker pull pandoc/latex:latest-ubuntu`
    1. `docker build -t pandoc .`

## 実行

```sh
$ cd pandoc
$ ./makedoc [all]
```

成功すると[ディスクゴルフ大会のための競技マニュアル](ディスクゴルフ大会のための競技マニュアル.pdf)ファイルが作成される。

## デバッグ

下記コマンドにてターゲットOS上で`sh`を立ち上げて、任意のコマンドを実行する。

```sh
$ docker run --rm --entrypoint="sh" -v $(pwd):/data -v $(pwd)/../cm:/source -it pandoc
# make [all]
```

実行後、pandocに入力された全データは、[`.teststream.md`](.teststream.md)に保存されるので、必要に応じて確認すると良い。
